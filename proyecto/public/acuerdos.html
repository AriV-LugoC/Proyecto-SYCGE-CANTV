<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Listado de Acuerdos - SYCGE CANTV</title>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/acuerdos.css">
    <link rel="stylesheet" href="css/fichaAcuerdo.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
 <div class="sidebar"> 
    <div class="sidebar-header">
        <span class="sidebar-title">MENÚ</span>
        <button id="toggle-sidebar" class="sidebar-toggle">
            <i class="fa-solid fa-bars"></i>
        </button>
    </div>
    <ul class="sidebar-list">
        <li onclick="location.href='index.html'"><i class="fa-solid fa-house"></i> <span class="sidebar-text">INICIO</span></li>
        <li onclick="location.href='reportes.html'"><i class="fa-solid fa-file-alt"></i> <span class="sidebar-text">REPORTES</span></li>
        <li onclick="location.href='acuerdos.html'"><i class="fa-solid fa-list-check"></i> <span class="sidebar-text">LISTADO DE ACUERDOS</span></li>
    </ul>
    <div class="sidebar-bottom">
        <ul>
            <li onclick="location.href='configuracion.html'"><i class="fa-solid fa-gear"></i> <span class="sidebar-text">CONFIGURACIÓN</span></li>
            <li onclick="cerrarSesion()"><i class="fa-solid fa-right-from-bracket"></i> <span class="sidebar-text">SALIR</span></li>
        </ul>
    </div>
</div>   
    <div class="main-content">
        <div class="titulo-acuerdos">
            <i class="fa-solid fa-list-check"></i>
            <span>Listado de Acuerdos</span>
            <button class="btn-nuevo-acuerdo" onclick="abrirModalNuevoAcuerdo()">
                <i class="fa-solid fa-plus"></i> Nuevo Acuerdo
            </button>
        </div>
        <div class="tabla-acuerdos">
            <!-- Encabezado de la tabla de acuerdos -->
            <table>
                <thead>
                    <tr>
                        <th># Control</th>
                        <th>Fecha Comité</th>
                        <th>Tipo Comité</th>
                        <th>Autoridad</th>
                        <th>Punto de Agenda</th>
                        <th>Acuerdos</th>
                        <th>Unidad Responsable</th>
                        <th>Vicepresidencia</th>
                        <th>Estado</th>
                        <th>PDF</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="tbody-acuerdos">
                    <!-- Aquí se cargan los acuerdos dinámicamente -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Modal para nuevo acuerdo -->
    <div id="modal-nuevo-acuerdo" class="modal">
        <div class="modal-content">
            <span class="close" onclick="cerrarModalNuevoAcuerdo()">&times;</span>
            <h3>Nuevo Acuerdo</h3>
            <form id="form-nuevo-acuerdo">
                <div class="form-row">
                    <div class="form-group">
                        <label for="identificativo">Identificativo</label>
                        <select id="identificativo" name="identificativo" required>
                            <option value="">Seleccione...</option>
                            <option value="CTS">CTS</option>
                            <option value="CTR">CTR</option>
                            <option value="CTO">CTO</option>
                            <option value="CP400">CP400</option>
                            <option value="CEE">CEE</option>
                            <option value="CE">CE</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="fecha_comite">Fecha de Comité</label>
                        <input type="text" id="fecha_comite" name="fecha_comite" placeholder="DD/MM/AAAA" pattern="^\d{2}/\d{2}/\d{4}$" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="tipo_comite">Tipo de Comité</label>
                        <select id="tipo_comite" name="tipo_comite" required>
                            <option value="">Seleccione...</option>
                            <option value="Ejecutivo">Ejecutivo</option>
                            <option value="Operaciones">Operaciones</option>
                            <option value="p400">P400</option>
                            <option value="Redes">Redes</option>
                            <option value="Servicios">Servicios</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="vicepresidencia">Vicepresidencia</label>
                        <input type="text" id="vicepresidencia" name="vicepresidencia" required>
                    </div>
                </div>
                <label for="autoridad">Autoridad Solicitante</label>
                <input type="text" id="autoridad" name="autoridad" required>
                <label for="punto_agenda">Punto de Agenda</label>
                <input type="text" id="punto_agenda" name="punto_agenda" required>
                <label for="acuerdos">Acuerdos/ Compromisos Establecidos</label>
                <textarea id="acuerdos" name="acuerdos" required></textarea>
                <label for="unidad-responsable">Unidad Responsable (Gerencia General):</label>
                <select id="unidad_responsable" name="unidad_responsable" required>
                    <option value="">Seleccione...</option>
                    <option value="Gerencia General de Tecnología">Gerencia General de Tecnología</option>
                    <option value="Gerencia General de Seguimiento y Control">Gerencia General de Seguimiento y Control</option>
                    <option value="Gerencia General de Proyectos Mayores">Gerencia General de Proyectos Mayores</option>
                    <option value="Gerencia General de Servicios y Logística">Gerencia General de Servicios y Logística</option>
                    <option value="Gerencia General de Sistemas">Gerencia General de Sistemas</option>
                    <option value="Gerencia General de Empresas Privadas">Gerencia General de Empresas Privadas</option>
                    <option value="Gerencia General de Energía y Climatización">Gerencia General de Energía y Climatización</option>
                    <option value="Gerencia General de Mercadeo">Gerencia General de Mercadeo</option>
                    <option value="Gerencia General de Mercados">Gerencia General de Mercados</option>
                    <option value="Gerencia General de Instituciones Públicas">Gerencia General de Instituciones Públicas</option>
                    <option value="Gerencia General de Gestión Humana">Gerencia General de Gestión Humana</option>
                    <option value="Gerencia General de Infraestructura">Gerencia General de Infraestructura</option>
                    <option value="Gerencia General de Planificación">Gerencia General de Planificación</option>
                    <option value="Gerencia General de Procura">Gerencia General de Procura</option>
                    <option value="Gerencia General de Finanzas">Gerencia General de Finanzas</option>
                    <option value="Gerencia General de Gestión de Flotas">Gerencia General de Gestión de Flotas</option>
                    <option value="Gerencia General de Operaciones de Telecomunicaciones">Gerencia General de Operaciones de Telecomunicaciones</option>
                    <option value="Gerencia General de Operaciones Descentralizadas">Gerencia General de Operaciones Descentralizadas</option>
                </select>
                <label for="unidad_seguimiento">Unidad de seguimiento</label>
                <input type="text" id="unidad_seguimiento" name="unidad_seguimiento" required>
                <button type="submit" class="btn-crear">CREAR</button>
            </form>
        </div>
    </div>

    <!-- Modal edición parcial supervisor -->
    <div id="modal-editar-parcial" class="modal" style="display:none;">
      <div class="modal-content form-edicion-parcial">
        <span class="close" onclick="cerrarModalEditarParcial()">&times;</span>
        <h3>Editar Acuerdo (Supervisor)</h3>
        <form id="form-editar-parcial">
          <div class="form-group">
            <label for="acuerdos-parcial">Acuerdos</label>
            <input type="text" id="acuerdos-parcial" name="acuerdos" placeholder="Nuevo acuerdo..." autocomplete="off">
          </div>
          <div class="form-group">
            <label for="punto-agenda-parcial">Punto de Agenda</label>
            <input type="text" id="punto-agenda-parcial" name="punto_agenda" placeholder="Nuevo punto de agenda..." autocomplete="off">
          </div>
          <div class="form-group">
            <label for="estado-parcial">Progreso</label>
            <select id="estado-parcial" name="estado">
              <option value="">Seleccione...</option>
              <option value="10%">10%</option>
              <option value="20%">20%</option>
              <option value="30%">30%</option>
              <option value="40%">40%</option>
              <option value="50%">50%</option>
              <option value="60%">60%</option>
              <option value="70%">70%</option>
              <option value="80%">80%</option>
              <option value="90%">90%</option>
              <option value="100%">100%</option>
            </select>
          </div>
          <div class="botones">
            <button type="submit" class="btn-guardar-parcial">Guardar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal de comentarios -->
    <div id="modal-comentarios" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close" onclick="cerrarModalComentarios()">&times;</span>
            <h3>Comentarios del acuerdo</h3>
            <div id="chat-comentarios" style="max-height:300px;overflow-y:auto;margin-bottom:12px;"></div>
            <form id="form-comentar" style="display:flex;gap:8px;">
                <input type="text" id="input-comentario" placeholder="Escribe tu comentario..." required style="flex:1;">
                <button type="submit" class="btn-comentar-chat">Enviar</button>
            </form>
        </div>
    </div>

    <!-- Modal para ver archivos PDF -->
    <div id="modal-archivos" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close" onclick="cerrarModalArchivos()">&times;</span>
            <h3>Archivos PDF del acuerdo</h3>
            <ul id="lista-archivos" style="list-style:none; padding:0;"></ul>
        </div>
    </div>

    <!-- Modal para ver ficha del acuerdo -->
    <div id="modal-ficha-acuerdo" class="modal" style="display:none;">
        <div class="modal-content" style="max-width:600px;">
            <span class="close" onclick="cerrarModalFichaAcuerdo()">&times;</span>
            <h3>Ficha del Acuerdo</h3>
            <div id="ficha-acuerdo-detalle"></div>
        </div>
    </div>

    <script src="js/notificaciones.js"></script>
    <script src="js/acuerdos.js"></script>
    <script src="js/sidebar.js"></script>
    <script src="js/fichaAcuerdo.js"></script>
    <script>
        const cargoUsuario = localStorage.getItem('cargoUsuario');
        if (cargoUsuario !== 'Gerente General') {
            document.querySelector('.btn-nuevo-acuerdo').style.display = 'none';
        }
    </script>
</body>
</html>